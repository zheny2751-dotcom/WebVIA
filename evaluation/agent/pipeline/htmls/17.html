<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户调查</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        function App() {
            const [currentStep, setCurrentStep] = useState(1);
            const [progress, setProgress] = useState(0);
            const [basicInfo, setBasicInfo] = useState({
                name: '',
                email: '',
                gender: '',
                ageGroup: ''
            });
            const [surveyAnswers, setSurveyAnswers] = useState({
                single1: '',
                single2: '', 
                single3: '',
                multi1: [],
                multi2: []
            });
            const [feedback, setFeedback] = useState('');
            
            const singleQuestions = [
                {
                    id: 'single1',
                    question: '您最常使用哪种设备上网？',
                    options: ['手机', '电脑', '平板', '其他']
                },
                {
                    id: 'single2', 
                    question: '您每天上网时间大约多长？',
                    options: ['1-3小时', '4-6小时', '7-9小时', '10小时以上']
                },
                {
                    id: 'single3',
                    question: '您对我们的服务满意度如何？',
                    options: ['非常满意', '满意', '一般', '不满意']
                }
            ];
            
            const multiQuestions = [
                {
                    id: 'multi1',
                    question: '您感兴趣的功能有哪些？（可多选）',
                    options: ['在线购物', '社交媒体', '视频娱乐', '学习教育', '办公工具']
                },
                {
                    id: 'multi2',
                    question: '您希望我们改进的方面有？（可多选）',
                    options: ['界面设计', '加载速度', '功能丰富度', '客户服务', '价格优惠']
                }
            ];
            
            const checkSurveyCompletion = (answers) => {
                const totalQuestions = 5;
                let answeredCount = 0;
                if (answers.single1) answeredCount++;
                if (answers.single2) answeredCount++;
                if (answers.single3) answeredCount++;
                if (answers.multi1.length > 0) answeredCount++;
                if (answers.multi2.length > 0) answeredCount++;
                
                if (answeredCount === totalQuestions) {
                    setProgress(75);
                }
            };
            
            const handleBasicInfoSubmit = () => {
                if (basicInfo.name && basicInfo.email && basicInfo.gender && basicInfo.ageGroup) {
                    setCurrentStep(2);
                    setProgress(25);
                }
            };
            
            const handleSingleAnswer = (questionId, answer) => {
                setSurveyAnswers(prev => {
                    const newAnswers = {
                        ...prev,
                        [questionId]: answer
                    };
                    checkSurveyCompletion(newAnswers);
                    return newAnswers;
                });
            };
            
            const handleMultiAnswer = (questionId, option) => {
                setSurveyAnswers(prev => {
                    const currentAnswers = prev[questionId] || [];
                    const newMultiAnswers = currentAnswers.includes(option) 
                        ? currentAnswers.filter(item => item !== option)
                        : [...currentAnswers, option];
                    
                    const newAnswers = {
                        ...prev,
                        [questionId]: newMultiAnswers
                    };
                    checkSurveyCompletion(newAnswers);
                    return newAnswers;
                });
            };
            
            const handleSurveySubmit = () => {
                const totalQuestions = 5;
                let answeredCount = 0;
                if (surveyAnswers.single1) answeredCount++;
                if (surveyAnswers.single2) answeredCount++;
                if (surveyAnswers.single3) answeredCount++;
                if (surveyAnswers.multi1.length > 0) answeredCount++;
                if (surveyAnswers.multi2.length > 0) answeredCount++;
                
                if (answeredCount === totalQuestions) {
                    setCurrentStep(3);
                    setProgress(75);
                }
            };
            
            const handleFeedbackSubmit = () => {
                setCurrentStep(4);
                setProgress(100);
            };
            
            const handleRestart = () => {
                setCurrentStep(1);
                setProgress(0);
                setBasicInfo({
                    name: '',
                    email: '',
                    gender: '',
                    ageGroup: ''
                });
                setSurveyAnswers({
                    single1: '',
                    single2: '',
                    single3: '',
                    multi1: [],
                    multi2: []
                });
                setFeedback('');
            };
            
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
                    <nav className="bg-white shadow-lg">
                        <div className="max-w-6xl mx-auto px-4">
                            <div className="flex justify-between items-center py-4">
                                <div className="flex items-center space-x-4">
                                    <i className="fas fa-poll text-2xl text-indigo-600"></i>
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-800">用户调查</h1>
                                        <p className="text-sm text-gray-600">帮助我们了解您的需求，提供更好的服务</p>
                                    </div>
                                </div>
                                <div className="text-right">
                                    <div className="text-sm text-gray-500">当前进度</div>
                                    <div className="text-xl font-bold text-indigo-600">{progress}%</div>
                                </div>
                            </div>
                        </div>
                    </nav>
                    
                    <div className="max-w-4xl mx-auto px-4 py-8">
                        <div className="bg-white rounded-lg shadow-xl overflow-hidden">
                            <div className="relative">
                                <img 
                                    src="https://picsum.photos/id/3/800/200" 
                                    alt="Survey Banner" 
                                    className="w-full h-48 object-cover"
                                />
                                <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                                    <div className="text-center text-white">
                                        <h2 className="text-3xl font-bold mb-2">感谢您参与我们的调查</h2>
                                        <p className="text-lg">您的意见对我们非常重要</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="p-8">
                                {currentStep === 1 && (
                                    <div className="fade-in">
                                        <h3 className="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                            <i className="fas fa-user mr-3 text-indigo-600"></i>
                                            基本信息
                                        </h3>
                                        <div className="grid md:grid-cols-2 gap-6">
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">姓名</label>
                                                <input 
                                                    type="text"
                                                    placeholder="请输入您的姓名"
                                                    value={basicInfo.name}
                                                    onChange={(e) => setBasicInfo(prev => ({...prev, name: e.target.value}))}
                                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">邮箱</label>
                                                <input 
                                                    type="text"
                                                    placeholder="请输入您的邮箱地址"
                                                    value={basicInfo.email}
                                                    onChange={(e) => setBasicInfo(prev => ({...prev, email: e.target.value}))}
                                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">性别</label>
                                                <div className="flex space-x-6">
                                                    {['男', '女', '其他'].map(gender => (
                                                        <label key={gender} className="flex items-center">
                                                            <input 
                                                                type="radio"
                                                                name="gender"
                                                                value={gender}
                                                                checked={basicInfo.gender === gender}
                                                                onChange={(e) => setBasicInfo(prev => ({...prev, gender: e.target.value}))}
                                                                className="mr-2 text-indigo-600"
                                                            />
                                                            <span className="text-gray-700">{gender}</span>
                                                        </label>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-gray-700 mb-2">年龄段</label>
                                                <select 
                                                    value={basicInfo.ageGroup}
                                                    onChange={(e) => setBasicInfo(prev => ({...prev, ageGroup: e.target.value}))}
                                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                                >
                                                    <option value="">请选择年龄段</option>
                                                    <option value="18-25">18-25岁</option>
                                                    <option value="26-35">26-35岁</option>
                                                    <option value="36-45">36-45岁</option>
                                                    <option value="45+">45岁以上</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div className="mt-8 text-center">
                                            <button 
                                                onClick={handleBasicInfoSubmit}
                                                disabled={!basicInfo.name || !basicInfo.email || !basicInfo.gender || !basicInfo.ageGroup}
                                                className="px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200"
                                            >
                                                下一步
                                                <i className="fas fa-arrow-right ml-2"></i>
                                            </button>
                                        </div>
                                    </div>
                                )}
                                
                                {currentStep === 2 && (
                                    <div className="fade-in">
                                        <h3 className="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                            <i className="fas fa-clipboard-list mr-3 text-indigo-600"></i>
                                            调查问卷
                                        </h3>
                                        
                                        <div className="space-y-8">
                                            {singleQuestions.map((q, index) => (
                                                <div key={q.id} className="bg-gray-50 p-6 rounded-lg">
                                                    <h4 className="text-lg font-medium text-gray-800 mb-4">
                                                        {index + 1}. {q.question}
                                                    </h4>
                                                    <div className="grid md:grid-cols-2 gap-3">
                                                        {q.options.map(option => (
                                                            <label key={option} className="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:bg-indigo-50 cursor-pointer">
                                                                <input 
                                                                    type="radio"
                                                                    name={q.id}
                                                                    value={option}
                                                                    checked={surveyAnswers[q.id] === option}
                                                                    onChange={(e) => handleSingleAnswer(q.id, e.target.value)}
                                                                    className="mr-3 text-indigo-600"
                                                                />
                                                                <span className="text-gray-700">{option}</span>
                                                            </label>
                                                        ))}
                                                    </div>
                                                </div>
                                            ))}
                                            
                                            {multiQuestions.map((q, index) => (
                                                <div key={q.id} className="bg-gray-50 p-6 rounded-lg">
                                                    <h4 className="text-lg font-medium text-gray-800 mb-4">
                                                        {singleQuestions.length + index + 1}. {q.question}
                                                    </h4>
                                                    <div className="grid md:grid-cols-2 gap-3">
                                                        {q.options.map(option => (
                                                            <label key={option} className="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:bg-indigo-50 cursor-pointer">
                                                                <input 
                                                                    type="checkbox"
                                                                    checked={surveyAnswers[q.id].includes(option)}
                                                                    onChange={() => handleMultiAnswer(q.id, option)}
                                                                    className="mr-3 text-indigo-600"
                                                                />
                                                                <span className="text-gray-700">{option}</span>
                                                            </label>
                                                        ))}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                        
                                        <div className="mt-8 text-center">
                                            <button 
                                                onClick={handleSurveySubmit}
                                                className="px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200"
                                            >
                                                提交问卷
                                                <i className="fas fa-paper-plane ml-2"></i>
                                            </button>
                                        </div>
                                    </div>
                                )}
                                
                                {currentStep === 3 && (
                                    <div className="fade-in">
                                        <h3 className="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                            <i className="fas fa-comments mr-3 text-indigo-600"></i>
                                            意见与建议
                                        </h3>
                                        <div className="bg-gray-50 p-6 rounded-lg">
                                            <label className="block text-sm font-medium text-gray-700 mb-3">
                                                请分享您的想法和建议（选填）
                                            </label>
                                            <textarea 
                                                value={feedback}
                                                onChange={(e) => setFeedback(e.target.value)}
                                                placeholder="您可以在这里写下对我们服务的任何意见、建议或想法..."
                                                rows="6"
                                                className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                                            />
                                        </div>
                                        <div className="mt-8 text-center">
                                            <button 
                                                onClick={handleFeedbackSubmit}
                                                className="px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200"
                                            >
                                                提交反馈
                                                <i className="fas fa-check ml-2"></i>
                                            </button>
                                        </div>
                                    </div>
                                )}
                                
                                {currentStep === 4 && (
                                    <div className="fade-in">
                                        <div className="text-center mb-8">
                                            <div className="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4">
                                                <i className="fas fa-check text-2xl text-green-600"></i>
                                            </div>
                                            <h3 className="text-2xl font-bold text-gray-800 mb-2">
                                                感谢您的参与！
                                            </h3>
                                            <p className="text-gray-600">
                                                尊敬的 {basicInfo.name}，您的反馈对我们非常宝贵
                                            </p>
                                        </div>
                                        
                                        <div className="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg mb-6">
                                            <h4 className="text-lg font-bold text-gray-800 mb-4">您的信息汇总</h4>
                                            <div className="grid md:grid-cols-2 gap-4 text-sm">
                                                <div>
                                                    <span className="font-medium text-gray-600">姓名：</span>
                                                    <span className="text-gray-800">{basicInfo.name}</span>
                                                </div>
                                                <div>
                                                    <span className="font-medium text-gray-600">邮箱：</span>
                                                    <span className="text-gray-800">{basicInfo.email}</span>
                                                </div>
                                                <div>
                                                    <span className="font-medium text-gray-600">性别：</span>
                                                    <span className="text-gray-800">{basicInfo.gender}</span>
                                                </div>
                                                <div>
                                                    <span className="font-medium text-gray-600">年龄段：</span>
                                                    <span className="text-gray-800">{basicInfo.ageGroup}</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div className="bg-gray-50 p-6 rounded-lg mb-6">
                                            <h4 className="text-lg font-bold text-gray-800 mb-4">问卷答案</h4>
                                            <div className="space-y-3 text-sm">
                                                {singleQuestions.map((q, index) => (
                                                    <div key={q.id}>
                                                        <span className="font-medium text-gray-600">{index + 1}. {q.question}</span>
                                                        <div className="text-gray-800 ml-4">答案：{surveyAnswers[q.id] || '未选择'}</div>
                                                    </div>
                                                ))}
                                                {multiQuestions.map((q, index) => (
                                                    <div key={q.id}>
                                                        <span className="font-medium text-gray-600">{singleQuestions.length + index + 1}. {q.question}</span>
                                                        <div className="text-gray-800 ml-4">答案：{surveyAnswers[q.id].length > 0 ? surveyAnswers[q.id].join(', ') : '未选择'}</div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                        
                                        {feedback && (
                                            <div className="bg-blue-50 p-6 rounded-lg mb-6">
                                                <h4 className="text-lg font-bold text-gray-800 mb-3">您的建议</h4>
                                                <p className="text-gray-700 text-sm leading-relaxed">{feedback}</p>
                                            </div>
                                        )}
                                        
                                        <div className="text-center">
                                            <button 
                                                onClick={handleRestart}
                                                className="px-8 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200"
                                            >
                                                <i className="fas fa-redo mr-2"></i>
                                                重新开始
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                        
                        <div className="mt-8 grid md:grid-cols-3 gap-6">
                            <div className="bg-white p-6 rounded-lg shadow-lg">
                                <img 
                                    src="https://picsum.photos/id/7/300/200" 
                                    alt="Privacy" 
                                    className="w-full h-32 object-cover rounded-lg mb-4"
                                />
                                <h4 className="font-bold text-gray-800 mb-2">隐私保护</h4>
                                <p className="text-sm text-gray-600">您的个人信息将严格保密，仅用于改善服务质量。</p>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow-lg">
                                <img 
                                    src="https://picsum.photos/id/16/300/200" 
                                    alt="Data Analysis" 
                                    className="w-full h-32 object-cover rounded-lg mb-4"
                                />
                                <h4 className="font-bold text-gray-800 mb-2">数据分析</h4>
                                <p className="text-sm text-gray-600">我们将认真分析每一份调查，持续优化产品体验。</p>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow-lg">
                                <img 
                                    src="https://picsum.photos/id/24/300/200" 
                                    alt="Feedback" 
                                    className="w-full h-32 object-cover rounded-lg mb-4"
                                />
                                <h4 className="font-bold text-gray-800 mb-2">反馈重要</h4>
                                <p className="text-sm text-gray-600">每一个建议都是宝贵的，帮助我们创造更好的服务。</p>
                            </div>
                        </div>
                    </div>
                    
                    <div className="bg-white border-t border-gray-200 mt-8">
                        <div className="max-w-6xl mx-auto px-4 py-6">
                            <div className="mb-4">
                                <div className="flex justify-between items-center mb-2">
                                    <span className="text-sm font-medium text-gray-600">调查进度</span>
                                    <span className="text-sm font-medium text-indigo-600">{progress}%</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-3">
                                    <div 
                                        className="bg-gradient-to-r from-indigo-500 to-purple-600 h-3 rounded-full transition-all duration-500 ease-out"
                                        style={{width: `${progress}%`}}
                                    ></div>
                                </div>
                            </div>
                            <div className="text-center">
                                <p className="text-sm text-gray-500">
                                    © 2024 用户调查系统. 您的隐私受到保护，所有数据仅用于改善服务质量。
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <style>{`
                        .fade-in {
                            animation: fadeIn 0.5s ease-in-out;
                        }
                        
                        @keyframes fadeIn {
                            from {
                                opacity: 0;
                                transform: translateY(20px);
                            }
                            to {
                                opacity: 1;
                                transform: translateY(0);
                            }
                        }
                    `}</style>
                </div>
            );
        }
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>