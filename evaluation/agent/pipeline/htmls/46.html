<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>优惠提醒 - 不错过任何优惠</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [currentBanner, setCurrentBanner] = useState(0);
            const [selectedType, setSelectedType] = useState('all');
            const [selectedCity, setSelectedCity] = useState('all');
            const [deals, setDeals] = useState([]);
            const [subscribedDeals, setSubscribedDeals] = useState([]);
            const [userDeals, setUserDeals] = useState([]);
            const [showUserCenter, setShowUserCenter] = useState(false);
            const [showSubscribeModal, setShowSubscribeModal] = useState(false);
            const [subscribeForm, setSubscribeForm] = useState({ email: '', phone: '', type: 'all' });
            const [feedback, setFeedback] = useState('');
            const [showFeedbackSuccess, setShowFeedbackSuccess] = useState(false);

            const banners = [
                {
                    id: 1,
                    title: "双十一狂欢节",
                    subtitle: "全场5折起，错过再等一年",
                    image: "https://picsum.photos/id/1/800/300",
                    color: "from-red-500 to-orange-500"
                },
                {
                    id: 2,
                    title: "春季大促销",
                    subtitle: "新品上市，限时优惠",
                    image: "https://picsum.photos/id/2/800/300",
                    color: "from-green-500 to-blue-500"
                },
                {
                    id: 3,
                    title: "会员专享",
                    subtitle: "VIP用户专属优惠券",
                    image: "https://picsum.photos/id/3/800/300",
                    color: "from-purple-500 to-pink-500"
                }
            ];

            const dealTypes = [
                { value: 'all', label: '全部类型' },
                { value: 'food', label: '美食餐饮' },
                { value: 'shopping', label: '购物商城' },
                { value: 'travel', label: '旅行出游' },
                { value: 'entertainment', label: '休闲娱乐' },
                { value: 'education', label: '教育培训' }
            ];

            const cities = [
                { value: 'all', label: '全部城市' },
                { value: 'beijing', label: '北京' },
                { value: 'shanghai', label: '上海' },
                { value: 'guangzhou', label: '广州' },
                { value: 'shenzhen', label: '深圳' },
                { value: 'hangzhou', label: '杭州' }
            ];

            const initialDeals = [
                {
                    id: 1,
                    title: "海底捞火锅8折优惠",
                    description: "全场菜品8折，包含饮料和小食",
                    type: "food",
                    city: "beijing",
                    remaining: 156,
                    originalRemaining: 200,
                    endTime: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000),
                    claimed: false,
                    image: "https://picsum.photos/id/10/300/200"
                },
                {
                    id: 2,
                    title: "天猫超市满200减50",
                    description: "日用品、食品全品类优惠券",
                    type: "shopping",
                    city: "shanghai",
                    remaining: 89,
                    originalRemaining: 100,
                    endTime: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000),
                    claimed: false,
                    image: "https://picsum.photos/id/11/300/200"
                },
                {
                    id: 3,
                    title: "迪士尼乐园门票7折",
                    description: "周末节假日通用，含快速通行证",
                    type: "entertainment",
                    city: "shanghai",
                    remaining: 0,
                    originalRemaining: 50,
                    endTime: new Date(Date.now() + 10 * 24 * 60 * 60 * 1000),
                    claimed: false,
                    image: "https://picsum.photos/id/12/300/200"
                },
                {
                    id: 4,
                    title: "新东方英语课程优惠",
                    description: "在线课程买一送一，名师授课",
                    type: "education",
                    city: "guangzhou",
                    remaining: 234,
                    originalRemaining: 300,
                    endTime: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
                    claimed: false,
                    image: "https://picsum.photos/id/13/300/200"
                },
                {
                    id: 5,
                    title: "三亚五星酒店住宿券",
                    description: "包含早餐和接送服务，海景房优先",
                    type: "travel",
                    city: "shenzhen",
                    remaining: 23,
                    originalRemaining: 30,
                    endTime: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000),
                    claimed: false,
                    image: "https://picsum.photos/id/14/300/200"
                },
                {
                    id: 6,
                    title: "星巴克买二送一",
                    description: "指定饮品活动，限门店使用",
                    type: "food",
                    city: "hangzhou",
                    remaining: 78,
                    originalRemaining: 100,
                    endTime: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000),
                    claimed: false,
                    image: "https://picsum.photos/id/15/300/200"
                }
            ];

            useEffect(() => {
                setDeals(initialDeals);
            }, []);

            useEffect(() => {
                const timer = setInterval(() => {
                    setDeals(prevDeals => 
                        prevDeals.map(deal => ({
                            ...deal,
                            endTime: deal.endTime
                        }))
                    );
                }, 1000);

                return () => clearInterval(timer);
            }, []);

            const nextBanner = () => {
                setCurrentBanner((prev) => (prev + 1) % banners.length);
            };

            const prevBanner = () => {
                setCurrentBanner((prev) => (prev - 1 + banners.length) % banners.length);
            };

            const filteredDeals = deals.filter(deal => {
                const typeMatch = selectedType === 'all' || deal.type === selectedType;
                const cityMatch = selectedCity === 'all' || deal.city === selectedCity;
                return typeMatch && cityMatch;
            });

            const claimDeal = (dealId) => {
                setDeals(prevDeals => 
                    prevDeals.map(deal => 
                        deal.id === dealId && deal.remaining > 0
                            ? { ...deal, remaining: deal.remaining - 1, claimed: true }
                            : deal
                    )
                );

                const claimedDeal = deals.find(deal => deal.id === dealId);
                if (claimedDeal && claimedDeal.remaining > 0) {
                    setUserDeals(prev => [...prev, { ...claimedDeal, claimedAt: new Date() }]);
                }
            };

            const formatTimeRemaining = (endTime) => {
                const now = new Date();
                const diff = endTime - now;
                
                if (diff <= 0) return "已过期";
                
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                
                if (days > 0) return `${days}天${hours}小时`;
                if (hours > 0) return `${hours}小时${minutes}分钟`;
                return `${minutes}分钟`;
            };

            const handleSubscribe = () => {
                if (!subscribeForm.email || !subscribeForm.phone) {
                    alert('请填写完整的联系信息');
                    return;
                }
                
                setSubscribedDeals(prev => [...prev, {
                    id: Date.now(),
                    email: subscribeForm.email,
                    phone: subscribeForm.phone,
                    type: subscribeForm.type,
                    subscribedAt: new Date()
                }]);
                
                setSubscribeForm({ email: '', phone: '', type: 'all' });
                setShowSubscribeModal(false);
                alert('订阅成功！我们会及时推送优惠信息给您');
            };

            const handleFeedbackSubmit = () => {
                if (!feedback.trim()) {
                    alert('请输入反馈内容');
                    return;
                }
                
                setFeedback('');
                setShowFeedbackSuccess(true);
                setTimeout(() => setShowFeedbackSuccess(false), 3000);
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-white shadow-md sticky top-0 z-50">
                        <div className="container mx-auto px-4 py-3 flex items-center justify-between">
                            <div className="flex items-center space-x-3">
                                <div className="w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center">
                                    <i className="fas fa-percentage text-white text-lg"></i>
                                </div>
                                <h1 className="text-2xl font-bold text-gray-800">优惠提醒</h1>
                            </div>
                            <div className="space-x-3">
                                <button className="px-4 py-2 text-orange-600 border border-orange-600 rounded-lg hover:bg-orange-50 transition-colors">
                                    登录
                                </button>
                                <button className="px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-lg hover:from-orange-600 hover:to-red-600 transition-colors">
                                    注册
                                </button>
                            </div>
                        </div>
                    </header>

                    <section className="relative h-80 overflow-hidden">
                        <div className="relative w-full h-full">
                            {banners.map((banner, index) => (
                                <div
                                    key={banner.id}
                                    className={`absolute inset-0 transition-opacity duration-500 ${
                                        index === currentBanner ? 'opacity-100' : 'opacity-0'
                                    }`}
                                >
                                    <div className={`w-full h-full bg-gradient-to-r ${banner.color} flex items-center justify-center relative`}>
                                        <img 
                                            src={banner.image} 
                                            alt={banner.title}
                                            className="absolute inset-0 w-full h-full object-cover opacity-30"
                                        />
                                        <div className="relative text-center text-white z-10">
                                            <h2 className="text-4xl font-bold mb-2">{banner.title}</h2>
                                            <p className="text-xl">{banner.subtitle}</p>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        <button
                            onClick={prevBanner}
                            className="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-30 hover:bg-opacity-50 text-white p-2 rounded-full transition-colors"
                        >
                            <i className="fas fa-chevron-left"></i>
                        </button>
                        <button
                            onClick={nextBanner}
                            className="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-30 hover:bg-opacity-50 text-white p-2 rounded-full transition-colors"
                        >
                            <i className="fas fa-chevron-right"></i>
                        </button>
                        
                        <div className="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
                            {banners.map((_, index) => (
                                <button
                                    key={index}
                                    onClick={() => setCurrentBanner(index)}
                                    className={`w-3 h-3 rounded-full transition-colors ${
                                        index === currentBanner ? 'bg-white' : 'bg-white bg-opacity-50'
                                    }`}
                                />
                            ))}
                        </div>
                    </section>

                    <main className="container mx-auto px-4 py-8">
                        <div className="mb-8 bg-white p-6 rounded-lg shadow-md">
                            <h3 className="text-xl font-semibold mb-4 text-gray-800">筛选优惠</h3>
                            <div className="flex flex-wrap gap-4">
                                <div className="flex-1 min-w-48">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">优惠类型</label>
                                    <select
                                        value={selectedType}
                                        onChange={(e) => setSelectedType(e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                                    >
                                        {dealTypes.map(type => (
                                            <option key={type.value} value={type.value}>{type.label}</option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div className="flex-1 min-w-48">
                                    <label className="block text-sm font-medium text-gray-700 mb-2">所在城市</label>
                                    <select
                                        value={selectedCity}
                                        onChange={(e) => setSelectedCity(e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                                    >
                                        {cities.map(city => (
                                            <option key={city.value} value={city.value}>{city.label}</option>
                                        ))}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div className="mb-8">
                            <div className="flex items-center justify-between mb-6">
                                <h3 className="text-2xl font-bold text-gray-800">热门优惠</h3>
                                <button
                                    onClick={() => setShowUserCenter(true)}
                                    className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                                >
                                    <i className="fas fa-user mr-2"></i>我的优惠
                                </button>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredDeals.map(deal => (
                                    <div key={deal.id} className="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                                        <img 
                                            src={deal.image} 
                                            alt={deal.title}
                                            className="w-full h-48 object-cover"
                                        />
                                        <div className="p-4">
                                            <h4 className="text-lg font-semibold text-gray-800 mb-2">{deal.title}</h4>
                                            <p className="text-gray-600 text-sm mb-3">{deal.description}</p>
                                            
                                            <div className="flex items-center justify-between mb-3">
                                                <span className="text-sm text-gray-500">
                                                    剩余: <span className="font-semibold text-orange-600">{deal.remaining}</span>/{deal.originalRemaining}
                                                </span>
                                                <span className="text-sm text-gray-500">
                                                    <i className="fas fa-clock mr-1"></i>
                                                    {formatTimeRemaining(deal.endTime)}
                                                </span>
                                            </div>
                                            
                                            <div className="w-full bg-gray-200 rounded-full h-2 mb-4">
                                                <div 
                                                    className="bg-gradient-to-r from-orange-500 to-red-500 h-2 rounded-full"
                                                    style={{ width: `${(deal.remaining / deal.originalRemaining) * 100}%` }}
                                                ></div>
                                            </div>
                                            
                                            <button
                                                onClick={() => claimDeal(deal.id)}
                                                disabled={deal.remaining === 0 || deal.claimed || formatTimeRemaining(deal.endTime) === "已过期"}
                                                className={`w-full py-2 px-4 rounded-lg font-semibold transition-colors ${
                                                    deal.remaining === 0 || formatTimeRemaining(deal.endTime) === "已过期"
                                                        ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                                        : deal.claimed
                                                        ? 'bg-green-500 text-white cursor-not-allowed'
                                                        : 'bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600'
                                                }`}
                                            >
                                                {deal.remaining === 0 || formatTimeRemaining(deal.endTime) === "已过期"
                                                    ? '已抢完'
                                                    : deal.claimed
                                                    ? '已领取'
                                                    : '立即领取'
                                                }
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="mb-8 bg-white p-6 rounded-lg shadow-md">
                            <h3 className="text-xl font-semibold mb-4 text-gray-800">订阅优惠提醒</h3>
                            <p className="text-gray-600 mb-4">订阅后，我们会第一时间为您推送最新优惠信息</p>
                            <button
                                onClick={() => setShowSubscribeModal(true)}
                                className="px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-green-600 hover:to-blue-600 transition-colors"
                            >
                                <i className="fas fa-bell mr-2"></i>立即订阅
                            </button>
                        </div>

                        <div className="bg-white p-6 rounded-lg shadow-md">
                            <h3 className="text-xl font-semibold mb-4 text-gray-800">意见反馈</h3>
                            <textarea
                                value={feedback}
                                onChange={(e) => setFeedback(e.target.value)}
                                placeholder="请输入您的宝贵意见和建议..."
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none"
                                rows="4"
                            />
                            <div className="mt-4 flex items-center justify-between">
                                <button
                                    onClick={handleFeedbackSubmit}
                                    className="px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors"
                                >
                                    提交反馈
                                </button>
                                {showFeedbackSuccess && (
                                    <span className="text-green-600 font-semibold">
                                        <i className="fas fa-check-circle mr-2"></i>感谢您的反馈！
                                    </span>
                                )}
                            </div>
                        </div>
                    </main>

                    <footer className="bg-gray-800 text-white py-8 mt-12">
                        <div className="container mx-auto px-4">
                            <div className="flex flex-wrap justify-between items-center">
                                <div>
                                    <p className="text-sm text-gray-400">
                                        © 2024 优惠提醒. 保留所有权利.
                                    </p>
                                </div>
                                <div className="flex space-x-4">
                                    <a href="#" className="text-gray-400 hover:text-white transition-colors">
                                        <i className="fab fa-weibo text-xl"></i>
                                    </a>
                                    <a href="#" className="text-gray-400 hover:text-white transition-colors">
                                        <i className="fab fa-weixin text-xl"></i>
                                    </a>
                                    <a href="#" className="text-gray-400 hover:text-white transition-colors">
                                        <i className="fab fa-qq text-xl"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </footer>

                    {showSubscribeModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white p-6 rounded-lg max-w-md w-full mx-4">
                                <h3 className="text-xl font-semibold mb-4">订阅优惠提醒</h3>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">邮箱地址</label>
                                        <input
                                            type="email"
                                            value={subscribeForm.email}
                                            onChange={(e) => setSubscribeForm(prev => ({ ...prev, email: e.target.value }))}
                                            placeholder="请输入邮箱地址"
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">手机号码</label>
                                        <input
                                            type="tel"
                                            value={subscribeForm.phone}
                                            onChange={(e) => setSubscribeForm(prev => ({ ...prev, phone: e.target.value }))}
                                            placeholder="请输入手机号码"
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">感兴趣的优惠类型</label>
                                        <select
                                            value={subscribeForm.type}
                                            onChange={(e) => setSubscribeForm(prev => ({ ...prev, type: e.target.value }))}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                                        >
                                            {dealTypes.map(type => (
                                                <option key={type.value} value={type.value}>{type.label}</option>
                                            ))}
                                        </select>
                                    </div>
                                </div>
                                
                                <div className="flex space-x-3 mt-6">
                                    <button
                                        onClick={() => setShowSubscribeModal(false)}
                                        className="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
                                    >
                                        取消
                                    </button>
                                    <button
                                        onClick={handleSubscribe}
                                        className="flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-green-600 hover:to-blue-600 transition-colors"
                                    >
                                        确认订阅
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showUserCenter && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white p-6 rounded-lg max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
                                <div className="flex items-center justify-between mb-4">
                                    <h3 className="text-xl font-semibold">我的优惠</h3>
                                    <button
                                        onClick={() => setShowUserCenter(false)}
                                        className="text-gray-500 hover:text-gray-700"
                                    >
                                        <i className="fas fa-times text-xl"></i>
                                    </button>
                                </div>
                                
                                <div className="space-y-4">
                                    <div>
                                        <h4 className="font-semibold text-gray-800 mb-2">已领取的优惠 ({userDeals.length})</h4>
                                        {userDeals.length === 0 ? (
                                            <p className="text-gray-500">您还没有领取任何优惠</p>
                                        ) : (
                                            <div className="space-y-2">
                                                {userDeals.map(deal => (
                                                    <div key={`${deal.id}-${deal.claimedAt}`} className="p-3 bg-green-50 border border-green-200 rounded-lg">
                                                        <div className="flex items-center justify-between">
                                                            <span className="font-medium text-green-800">{deal.title}</span>
                                                            <span className="text-sm text-green-600">
                                                                {deal.claimedAt.toLocaleDateString()}
                                                            </span>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                    
                                    <div>
                                        <h4 className="font-semibold text-gray-800 mb-2">已订阅的提醒 ({subscribedDeals.length})</h4>
                                        {subscribedDeals.length === 0 ? (
                                            <p className="text-gray-500">您还没有订阅任何提醒</p>
                                        ) : (
                                            <div className="space-y-2">
                                                {subscribedDeals.map(sub => (
                                                    <div key={sub.id} className="p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                                        <div className="flex items-center justify-between">
                                                            <span className="font-medium text-blue-800">
                                                                {dealTypes.find(t => t.value === sub.type)?.label}类型优惠
                                                            </span>
                                                            <span className="text-sm text-blue-600">
                                                                {sub.subscribedAt.toLocaleDateString()}
                                                            </span>
                                                        </div>
                                                        <div className="text-sm text-blue-600 mt-1">
                                                            {sub.email} | {sub.phone}
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>