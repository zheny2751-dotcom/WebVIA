<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>水电查询系统</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    function App() {
      const [userInfo, setUserInfo] = useState(null);
      const [accountNumber, setAccountNumber] = useState('');
      const [selectedMonth, setSelectedMonth] = useState('');
      const [electricityChart, setElectricityChart] = useState(null);
      const [waterUsageData, setWaterUsageData] = useState(null);
      const [selectedYear, setSelectedYear] = useState('');
      const [selectedWaterMonth, setSelectedWaterMonth] = useState('');
      const [estimatedElectricity, setEstimatedElectricity] = useState('');
      const [estimatedWater, setEstimatedWater] = useState('');
      const [electricityPrice, setElectricityPrice] = useState('');
      const [waterPrice, setWaterPrice] = useState('');
      const [costCalculation, setCostCalculation] = useState(null);
      const [paymentAmount, setPaymentAmount] = useState('');
      const [paymentStatus, setPaymentStatus] = useState('');
      const [currentNotice, setCurrentNotice] = useState(0);
      const [selectedQuestion, setSelectedQuestion] = useState('');
      const [questionAnswer, setQuestionAnswer] = useState('');
      const [showPaymentModal, setShowPaymentModal] = useState(false);
      const [selectedWaterRow, setSelectedWaterRow] = useState(null);

      const notices = [
        "系统维护通知：本周六晚10:00-12:00进行系统升级维护",
        "电费价格调整：自下月起居民用电价格调整为0.52元/度",
        "夏季用电高峰提醒：请合理使用空调，节约用电",
        "水费缴费优惠：本月使用在线缴费可享9.5折优惠"
      ];

      const faqData = {
        "如何查询用电量？": "您可以通过输入户号在用户查询模块中查看用电信息，或使用用电量查询模块查看详细的日用电量图表。",
        "水费如何计算？": "水费按阶梯收费，第一阶梯0-15立方米2.8元/立方米，第二阶梯16-25立方米3.2元/立方米，超过25立方米按3.8元/立方米计算。",
        "如何在线缴费？": "您可以在在线缴费模块输入缴费金额，点击立即缴费按钮，确认后即可完成支付。",
        "忘记户号怎么办？": "请携带身份证到就近营业厅查询，或拨打客服热线95598进行查询。"
      };

      const queryUserInfo = () => {
        if (!accountNumber.trim()) {
          setUserInfo({ error: "请输入有效的户号" });
          return;
        }
        
        setUserInfo({ loading: true });
        setTimeout(() => {
          setUserInfo({
            name: "张先生",
            address: "北京市朝阳区建国路88号",
            electricityStatus: "正常",
            waterStatus: "正常",
            lastElectricityReading: "2,847度",
            lastWaterReading: "156立方米"
          });
        }, 1000);
      };

      const queryElectricity = () => {
        if (!selectedMonth) {
          setElectricityChart({ error: "请选择查询月份" });
          return;
        }

        const days = new Date(2024, parseInt(selectedMonth), 0).getDate();
        const data = Array.from({ length: days }, (_, i) => ({
          day: i + 1,
          usage: Math.floor(Math.random() * 20) + 15
        }));

        setElectricityChart({ data, month: selectedMonth });
      };

      const queryWaterUsage = () => {
        if (!selectedYear || !selectedWaterMonth) {
          setWaterUsageData({ error: "请选择年份和月份" });
          return;
        }

        const days = new Date(parseInt(selectedYear), parseInt(selectedWaterMonth), 0).getDate();
        const data = Array.from({ length: days }, (_, i) => ({
          date: `${selectedYear}-${selectedWaterMonth.padStart(2, '0')}-${(i + 1).toString().padStart(2, '0')}`,
          usage: (Math.random() * 2 + 0.5).toFixed(2),
          details: `用水时段：${Math.floor(Math.random() * 12) + 6}:00-${Math.floor(Math.random() * 12) + 18}:00`
        }));

        setWaterUsageData({ data, year: selectedYear, month: selectedWaterMonth });
      };

      const calculateCost = () => {
        if (!estimatedElectricity || !estimatedWater || !electricityPrice || !waterPrice) {
          setCostCalculation({ error: "请填写完整信息" });
          return;
        }

        const electricityCost = parseFloat(estimatedElectricity) * parseFloat(electricityPrice);
        const waterCost = parseFloat(estimatedWater) * parseFloat(waterPrice);
        const totalCost = electricityCost + waterCost;

        setCostCalculation({
          electricityCost: electricityCost.toFixed(2),
          waterCost: waterCost.toFixed(2),
          totalCost: totalCost.toFixed(2)
        });
      };

      const handlePayment = () => {
        if (!paymentAmount || parseFloat(paymentAmount) <= 0) {
          setPaymentStatus("请输入有效的缴费金额");
          return;
        }
        setShowPaymentModal(true);
      };

      const confirmPayment = () => {
        setShowPaymentModal(false);
        const success = Math.random() > 0.2;
        setPaymentStatus(success ? 
          `支付成功！缴费金额：¥${paymentAmount}，交易时间：${new Date().toLocaleString()}` :
          "支付失败，请检查账户余额或重试"
        );
        setPaymentAmount('');
      };

      const nextNotice = () => {
        setCurrentNotice((prev) => (prev + 1) % notices.length);
      };

      const prevNotice = () => {
        setCurrentNotice((prev) => (prev - 1 + notices.length) % notices.length);
      };

      const viewAnswer = () => {
        if (!selectedQuestion) {
          setQuestionAnswer("请选择一个问题");
          return;
        }
        setQuestionAnswer(faqData[selectedQuestion]);
      };

      const showWaterDetails = (item) => {
        setSelectedWaterRow(item);
      };

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-green-50">
          <header className="bg-gradient-to-r from-blue-600 to-green-600 text-white shadow-lg">
            <div className="container mx-auto px-4 py-6">
              <div className="flex items-center justify-between">
                <div className="flex items-center space-x-4">
                  <i className="fas fa-tint text-3xl"></i>
                  <h1 className="text-2xl font-bold">水电查询系统</h1>
                </div>
                <div className="hidden md:flex items-center space-x-4">
                  <i className="fas fa-bolt text-yellow-300"></i>
                  <span>智能查询 · 便民服务</span>
                </div>
              </div>
            </div>
          </header>

          <div className="bg-blue-100 border-l-4 border-blue-500 p-4">
            <div className="container mx-auto">
              <div className="flex items-center justify-between">
                <button onClick={prevNotice} className="text-blue-600 hover:text-blue-800 p-2">
                  <i className="fas fa-chevron-left"></i>
                </button>
                <div className="flex-1 text-center">
                  <span className="text-blue-800 font-medium">
                    <i className="fas fa-bullhorn mr-2"></i>
                    {notices[currentNotice]}
                  </span>
                </div>
                <button onClick={nextNotice} className="text-blue-600 hover:text-blue-800 p-2">
                  <i className="fas fa-chevron-right"></i>
                </button>
              </div>
            </div>
          </div>

          <div className="container mx-auto px-4 py-8">
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div className="bg-white rounded-lg shadow-lg p-6 border-t-4 border-blue-500">
                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                  <i className="fas fa-user mr-2 text-blue-500"></i>
                  用户查询
                </h2>
                <div className="space-y-4">
                  <input
                    type="text"
                    value={accountNumber}
                    onChange={(e) => setAccountNumber(e.target.value)}
                    placeholder="请输入户号"
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                  <button
                    onClick={queryUserInfo}
                    className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-200"
                  >
                    <i className="fas fa-search mr-2"></i>
                    查询用户信息
                  </button>
                  
                  {userInfo && (
                    <div className="mt-4 p-4 bg-gray-50 rounded-lg">
                      {userInfo.loading ? (
                        <div className="text-center text-gray-600">
                          <i className="fas fa-spinner fa-spin mr-2"></i>
                          查询中...
                        </div>
                      ) : userInfo.error ? (
                        <div className="text-red-600">{userInfo.error}</div>
                      ) : (
                        <div className="space-y-2">
                          <img src="https://picsum.photos/id/1/400/200" alt="用户信息背景" className="w-full h-32 object-cover rounded mb-4"/>
                          <p><span className="font-medium">用户姓名：</span>{userInfo.name}</p>
                          <p><span className="font-medium">地址：</span>{userInfo.address}</p>
                          <p><span className="font-medium">用电状态：</span>
                            <span className="text-green-600">{userInfo.electricityStatus}</span>
                          </p>
                          <p><span className="font-medium">用水状态：</span>
                            <span className="text-green-600">{userInfo.waterStatus}</span>
                          </p>
                          <p><span className="font-medium">最新电表读数：</span>{userInfo.lastElectricityReading}</p>
                          <p><span className="font-medium">最新水表读数：</span>{userInfo.lastWaterReading}</p>
                        </div>
                      )}
                    </div>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-lg p-6 border-t-4 border-yellow-500">
                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                  <i className="fas fa-bolt mr-2 text-yellow-500"></i>
                  用电量查询
                </h2>
                <div className="space-y-4">
                  <select
                    value={selectedMonth}
                    onChange={(e) => setSelectedMonth(e.target.value)}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500"
                  >
                    <option value="">请选择月份</option>
                    {Array.from({ length: 12 }, (_, i) => (
                      <option key={i} value={i + 1}>{i + 1}月</option>
                    ))}
                  </select>
                  <button
                    onClick={queryElectricity}
                    className="w-full bg-yellow-600 text-white py-3 rounded-lg hover:bg-yellow-700 transition duration-200"
                  >
                    <i className="fas fa-chart-line mr-2"></i>
                    查询用电量
                  </button>
                  
                  {electricityChart && (
                    <div className="mt-4 p-4 bg-gray-50 rounded-lg">
                      {electricityChart.error ? (
                        <div className="text-red-600">{electricityChart.error}</div>
                      ) : (
                        <div>
                          <img src="https://picsum.photos/id/2/400/200" alt="用电量图表背景" className="w-full h-32 object-cover rounded mb-4"/>
                          <h4 className="font-medium mb-2">{electricityChart.month}月日用电量折线图</h4>
                          <div className="bg-white p-4 rounded border">
                            <svg width="100%" height="200" className="border rounded">
                              <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                  <stop offset="0%" style={{stopColor:'#fbbf24', stopOpacity:0.8}} />
                                  <stop offset="100%" style={{stopColor:'#fbbf24', stopOpacity:0.1}} />
                                </linearGradient>
                              </defs>
                              {electricityChart.data.map((item, index) => {
                                const x = (index / (electricityChart.data.length - 1)) * 300 + 20;
                                const y = 180 - (item.usage / 35) * 140;
                                return (
                                  <g key={index}>
                                    <circle cx={x} cy={y} r="3" fill="#f59e0b"/>
                                    {index > 0 && (
                                      <line 
                                        x1={(index - 1) / (electricityChart.data.length - 1) * 300 + 20}
                                        y1={180 - (electricityChart.data[index - 1].usage / 35) * 140}
                                        x2={x}
                                        y2={y}
                                        stroke="#f59e0b"
                                        strokeWidth="2"
                                      />
                                    )}
                                    <text x={x} y="195" textAnchor="middle" fontSize="10" fill="#666">
                                      {item.day}
                                    </text>
                                  </g>
                                );
                              })}
                            </svg>
                          </div>
                        </div>
                      )}
                    </div>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-lg p-6 border-t-4 border-green-500">
                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                  <i className="fas fa-tint mr-2 text-green-500"></i>
                  用水量查询
                </h2>
                <div className="space-y-4">
                  <div className="grid grid-cols-2 gap-4">
                    <select
                      value={selectedYear}
                      onChange={(e) => setSelectedYear(e.target.value)}
                      className="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">选择年份</option>
                      <option value="2024">2024年</option>
                      <option value="2023">2023年</option>
                      <option value="2022">2022年</option>
                    </select>
                    <select
                      value={selectedWaterMonth}
                      onChange={(e) => setSelectedWaterMonth(e.target.value)}
                      className="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"
                    >
                      <option value="">选择月份</option>
                      {Array.from({ length: 12 }, (_, i) => (
                        <option key={i} value={i + 1}>{i + 1}月</option>
                      ))}
                    </select>
                  </div>
                  <button
                    onClick={queryWaterUsage}
                    className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition duration-200"
                  >
                    <i className="fas fa-table mr-2"></i>
                    查询用水量
                  </button>
                  
                  {waterUsageData && (
                    <div className="mt-4 p-4 bg-gray-50 rounded-lg">
                      {waterUsageData.error ? (
                        <div className="text-red-600">{waterUsageData.error}</div>
                      ) : (
                        <div>
                          <img src="https://picsum.photos/id/3/400/150" alt="用水量表格背景" className="w-full h-24 object-cover rounded mb-4"/>
                          <h4 className="font-medium mb-2">{waterUsageData.year}年{waterUsageData.month}月用水量表格</h4>
                          <div className="max-h-64 overflow-y-auto space-y-1">
                            {waterUsageData.data.map((item, index) => (
                              <div 
                                key={index} 
                                className="flex justify-between items-center bg-white p-2 rounded border hover:bg-blue-50 cursor-pointer"
                                onClick={() => showWaterDetails(item)}
                              >
                                <span>{item.date}</span>
                                <span className="text-green-600 font-medium">{item.usage}立方米</span>
                              </div>
                            ))}
                          </div>
                          {selectedWaterRow && (
                            <div className="mt-4 p-3 bg-blue-100 rounded-lg">
                              <h5 className="font-medium text-blue-800">用水详情</h5>
                              <p className="text-blue-700">日期：{selectedWaterRow.date}</p>
                              <p className="text-blue-700">用量：{selectedWaterRow.usage}立方米</p>
                              <p className="text-blue-700">{selectedWaterRow.details}</p>
                            </div>
                          )}
                        </div>
                      )}
                    </div>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-lg p-6 border-t-4 border-purple-500">
                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                  <i className="fas fa-calculator mr-2 text-purple-500"></i>
                  费用估算
                </h2>
                <div className="space-y-4">
                  <div className="grid grid-cols-2 gap-4">
                    <input
                      type="number"
                      value={estimatedElectricity}
                      onChange={(e) => setEstimatedElectricity(e.target.value)}
                      placeholder="预计用电度数"
                      className="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                    />
                    <input
                      type="number"
                      value={estimatedWater}
                      onChange={(e) => setEstimatedWater(e.target.value)}
                      placeholder="预计用水立方米"
                      className="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                    />
                  </div>
                  <div className="grid grid-cols-2 gap-4">
                    <select
                      value={electricityPrice}
                      onChange={(e) => setElectricityPrice(e.target.value)}
                      className="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                    >
                      <option value="">选择电价</option>
                      <option value="0.52">居民电价 0.52元/度</option>
                      <option value="0.68">商业电价 0.68元/度</option>
                      <option value="0.45">优惠电价 0.45元/度</option>
                    </select>
                    <select
                      value={waterPrice}
                      onChange={(e) => setWaterPrice(e.target.value)}
                      className="p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"
                    >
                      <option value="">选择水价</option>
                      <option value="2.8">居民水价 2.8元/立方米</option>
                      <option value="3.2">商业水价 3.2元/立方米</option>
                      <option value="3.8">超额水价 3.8元/立方米</option>
                    </select>
                  </div>
                  <button
                    onClick={calculateCost}
                    className="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition duration-200"
                  >
                    <i className="fas fa-calculator mr-2"></i>
                    估算费用
                  </button>
                  
                  {costCalculation && (
                    <div className="mt-4 p-4 bg-gray-50 rounded-lg">
                      {costCalculation.error ? (
                        <div className="text-red-600">{costCalculation.error}</div>
                      ) : (
                        <div>
                          <img src="https://picsum.photos/id/4/400/150" alt="费用计算背景" className="w-full h-24 object-cover rounded mb-4"/>
                          <div className="space-y-2">
                            <div className="flex justify-between">
                              <span>电费小计：</span>
                              <span className="font-medium text-blue-600">¥{costCalculation.electricityCost}</span>
                            </div>
                            <div className="flex justify-between">
                              <span>水费小计：</span>
                              <span className="font-medium text-green-600">¥{costCalculation.waterCost}</span>
                            </div>
                            <div className="border-t pt-2 flex justify-between text-lg font-bold">
                              <span>总费用：</span>
                              <span className="text-purple-600">¥{costCalculation.totalCost}</span>
                            </div>
                          </div>
                        </div>
                      )}
                    </div>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-lg p-6 border-t-4 border-red-500">
                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                  <i className="fas fa-credit-card mr-2 text-red-500"></i>
                  在线缴费
                </h2>
                <div className="space-y-4">
                  <input
                    type="number"
                    value={paymentAmount}
                    onChange={(e) => setPaymentAmount(e.target.value)}
                    placeholder="请输入缴费金额"
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"
                  />
                  <button
                    onClick={handlePayment}
                    className="w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition duration-200"
                  >
                    <i className="fas fa-payment mr-2"></i>
                    立即缴费
                  </button>
                  
                  {paymentStatus && (
                    <div className={`mt-4 p-4 rounded-lg ${paymentStatus.includes('成功') ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                      <img src="https://picsum.photos/id/5/400/150" alt="支付状态背景" className="w-full h-24 object-cover rounded mb-2"/>
                      <div className="font-medium">支付状态：</div>
                      <div>{paymentStatus}</div>
                    </div>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-lg shadow-lg p-6 border-t-4 border-indigo-500">
                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                  <i className="fas fa-question-circle mr-2 text-indigo-500"></i>
                  客服帮助
                </h2>
                <div className="space-y-4">
                  <select
                    value={selectedQuestion}
                    onChange={(e) => setSelectedQuestion(e.target.value)}
                    className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"
                  >
                    <option value="">请选择常见问题</option>
                    {Object.keys(faqData).map((question, index) => (
                      <option key={index} value={question}>{question}</option>
                    ))}
                  </select>
                  <button
                    onClick={viewAnswer}
                    className="w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition duration-200"
                  >
                    <i className="fas fa-eye mr-2"></i>
                    查看答案
                  </button>
                  
                  {questionAnswer && (
                    <div className="mt-4 p-4 bg-gray-50 rounded-lg">
                      <img src="https://picsum.photos/id/6/400/150" alt="帮助信息背景" className="w-full h-24 object-cover rounded mb-4"/>
                      <div className="text-gray-700">
                        <div className="font-medium text-indigo-600 mb-2">解答：</div>
                        {questionAnswer}
                      </div>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>

          {showPaymentModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-white rounded-lg p-6 max-w-md w-full mx-4">
                <h3 className="text-lg font-bold mb-4 flex items-center">
                  <i className="fas fa-exclamation-triangle text-yellow-500 mr-2"></i>
                  确认缴费
                </h3>
                <img src="https://picsum.photos/id/7/300/150" alt="缴费确认" className="w-full h-24 object-cover rounded mb-4"/>
                <p className="text-gray-600 mb-4">
                  确认缴费金额：<span className="font-bold text-red-600">¥{paymentAmount}</span>
                </p>
                <div className="flex space-x-4">
                  <button
                    onClick={() => setShowPaymentModal(false)}
                    className="flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400 transition duration-200"
                  >
                    取消
                  </button>
                  <button
                    onClick={confirmPayment}
                    className="flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition duration-200"
                  >
                    确认支付
                  </button>
                </div>
              </div>
            </div>
          )}

          <footer className="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-8 mt-12">
            <div className="container mx-auto px-4">
              <img src="https://picsum.photos/id/8/600/200" alt="底部背景" className="w-full h-32 object-cover rounded mb-4 opacity-30"/>
              <div className="text-center">
                <div className="flex justify-center items-center space-x-4 mb-4">
                  <i className="fas fa-tint text-blue-400"></i>
                  <i className="fas fa-bolt text-yellow-400"></i>
                  <i className="fas fa-phone text-green-400"></i>
                </div>
                <p className="text-lg font-semibold">&copy; 2024 水电查询系统 版权所有</p>
                <p className="text-gray-400 mt-2">服务热线：95598 | 24小时在线服务</p>
                <p className="text-gray-400">智能查询 · 便民服务 · 绿色生活</p>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>